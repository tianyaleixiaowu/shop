webpackJsonp([13],{YpcG:function(t,i){},pt6B:function(t,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var c=s("mvHQ"),o=s.n(c),a=s("rQpX"),e=s("Qc6y"),r=s("RxMd"),l={components:{foot:a.default,topMember:r.default,top:e.default},data:function(){return{list:[],page:1,size:16,sort:"id",direction:"asc",detailDiv:!1,main:{},buynum:1,imgUrl:"",smallList:[],Hovcolor:"#c0c4cc",Hovcolor2:"#c0c4cc",Hovcolor3:"#c0c4cc",Hovcolor4:"#c0c4cc",Hovcolor5:"#c0c4cc",Hovcolor6:"#c0c4cc",shopcar:[],total:0,productPrize:"",zhongliang:"",yunfei:"",totalPrize:"",priceForm:JSON.parse(sessionStorage.getItem("priceForm"))}},mounted:function(){this.getList()},methods:{send:function(){sessionStorage.setItem("shopcar",o()(this.shopcar)),this.$router.push({path:"/buy",query:{buy:"0",productPrize:this.productPrize,zhongliang:this.zhongliang,yunfei:this.yunfei,totalPrize:this.totalPrize}})},getList:function(){var t=this;t.list=[],this.axios.get("/giftmall/goods?state=0&page="+(t.page-1)+"&size="+t.size+"&sort="+t.sort+"&direction="+t.direction,{headers:{"Content-Type":"application/x-www-form-urlencoded",domain:this.url,Authorization:sessionStorage.getItem("token")}}).then(function(i){if(200==i.data.code){t.list=i.data.data.list,t.total=i.data.data.totalCount;for(var s=0;s<t.list.length;s++)null==t.list[s].images&&(t.list[s].images="../../static/nopic.jpg")}})},paixu:function(t){this.sort=t,"price"==t?"asc"==this.direction?(this.direction="desc",this.Hovcolor="#ec3440",this.Hovcolor2="#c0c4cc",this.Hovcolor3="#c0c4cc",this.Hovcolor4="#c0c4cc",this.Hovcolor5="#c0c4cc",this.Hovcolor6="#c0c4cc"):(this.direction="asc",this.Hovcolor="#c0c4cc",this.Hovcolor2="#ec3440",this.Hovcolor3="#c0c4cc",this.Hovcolor4="#c0c4cc",this.Hovcolor5="#c0c4cc",this.Hovcolor6="#c0c4cc"):"weight"==t?"asc"==this.direction?(this.direction="desc",this.Hovcolor="#c0c4cc",this.Hovcolor2="#c0c4cc",this.Hovcolor3="#ec3440",this.Hovcolor4="#c0c4cc",this.Hovcolor5="#c0c4cc",this.Hovcolor6="#c0c4cc"):(this.direction="asc",this.Hovcolor="#c0c4cc",this.Hovcolor2="#c0c4cc",this.Hovcolor3="#c0c4cc",this.Hovcolor4="#ec3440",this.Hovcolor5="#c0c4cc",this.Hovcolor6="#c0c4cc"):"asc"==this.direction?(this.direction="desc",this.Hovcolor="#c0c4cc",this.Hovcolor2="#c0c4cc",this.Hovcolor3="#c0c4cc",this.Hovcolor4="#c0c4cc",this.Hovcolor5="#ec3440",this.Hovcolor6="#c0c4cc"):(this.direction="asc",this.Hovcolor="#c0c4cc",this.Hovcolor2="#c0c4cc",this.Hovcolor3="#c0c4cc",this.Hovcolor4="#c0c4cc",this.Hovcolor5="#c0c4cc",this.Hovcolor6="#ec3440"),this.getList()},detail:function(t){this.detailDiv=!0,this.buynum=1;var i=this;this.axios.get("/giftmall/goods/"+t,{headers:{"Content-Type":"application/x-www-form-urlencoded",domain:this.url,Authorization:sessionStorage.getItem("token")}}).then(function(t){200==t.data.code&&(i.main=t.data.data,t.data.data.images?(i.smallList=t.data.data.images.split(","),i.imgUrl=i.smallList[0]):(i.smallList=["../../static/nopic.jpg"],i.imgUrl="../../static/nopic.jpg"))})},add:function(t,i){if(this.shopcar.find(function(i){return i.id==t.id}))for(var s=0;s<this.shopcar.length;s++)t.id==this.shopcar[s].id&&(this.$set(this.shopcar[s],"num",Number(i)+Number(this.shopcar[s].num)),this.$set(this.shopcar[s],"total",parseFloat(100*t.price).toFixed(2)*this.shopcar[s].num/1e4));else this.$set(t,"num",i),this.$set(t,"total",parseFloat(100*t.price).toFixed(2)*t.num/1e4),this.shopcar.push(t);this.changePrize()},del:function(t){this.shopcar.splice(t,1),this.changePrize()},changePrize:function(){this.zhongliang=(parseFloat(this.shopcar.reduce(function(t,i){return i.weight*i.num+t},0))/1e3).toFixed(2),this.productPrize=this.shopcar.reduce(function(t,i){return i.total+t},0).toFixed(2),this.zhongliang<=.5?this.yunfei=(this.priceForm.nearPrice1/100).toFixed(2):this.zhongliang>.5&&this.zhongliang<=1?this.yunfei=(this.priceForm.nearPrice2/100).toFixed(2):this.zhongliang>1&&(this.yunfei=(Math.ceil(this.zhongliang-1)*this.priceForm.nearPrice3/100+this.priceForm.nearPrice2/100).toFixed(2)),this.totalPrize=(parseFloat(this.productPrize)+parseFloat(this.yunfei)).toFixed(2)},changeNum:function(t,i){for(var s=0;s<this.shopcar.length;s++)t==this.shopcar[s].id&&(this.$set(this.shopcar[s],"total",parseFloat(100*this.shopcar[s].price).toFixed(2)*i/1e4),this.changePrize())},getBigImg:function(t){this.imgUrl=t},handleSizeChange:function(t){console.log("每页 "+t+" 条"),this.size=t,this.getList()},handleCurrentChange:function(t){console.log("当前页: "+t),this.page=t,this.getList()}}},n={render:function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",[s("top"),t._v(" "),s("div",{staticClass:"box mar over",staticStyle:{width:"1260px"}},[s("div",{staticClass:"fffbg pull-left",staticStyle:{width:"910px"}},[t._m(0),t._v(" "),s("div",{staticClass:"pad15"},[s("el-row",{staticClass:"shaixuan"},[s("el-col",{attrs:{span:8}},[s("div",{on:{click:function(i){return t.paixu("price")}}},[t._v("\n                      价格\n                      "),s("span",{staticClass:"caret-wrapper"},[s("i",{staticClass:"sort-caret ascending",style:{"border-bottom-color":t.Hovcolor}}),s("i",{staticClass:"sort-caret descending",style:{"border-top-color":t.Hovcolor2}})])])]),t._v(" "),s("el-col",{attrs:{span:8}},[s("div",{on:{click:function(i){return t.paixu("weight")}}},[t._v("\n                      重量\n                      "),s("span",{staticClass:"caret-wrapper"},[s("i",{staticClass:"sort-caret ascending",style:{"border-bottom-color":t.Hovcolor3}}),s("i",{staticClass:"sort-caret descending",style:{"border-top-color":t.Hovcolor4}})])])]),t._v(" "),s("el-col",{attrs:{span:8}},[s("div",{on:{click:function(i){return t.paixu("saleCount")}}},[t._v("\n                      销量\n                      "),s("span",{staticClass:"caret-wrapper"},[s("i",{staticClass:"sort-caret ascending",style:{"border-bottom-color":t.Hovcolor5}}),s("i",{staticClass:"sort-caret descending",style:{"border-top-color":t.Hovcolor6}})])])])],1),t._v(" "),s("el-row",{staticClass:"shoplist",attrs:{gutter:15}},t._l(t.list,function(i,c){return s("el-col",{key:c,attrs:{span:6}},[s("img",{attrs:{src:i.images.split(",")[0]},on:{click:function(s){return t.detail(i.id)}}}),t._v(" "),s("div",{staticClass:"shoptitle"},[t._v(t._s(i.name))]),t._v(" "),s("div",{staticClass:"mar5 over"},[s("span",{staticClass:"red pull-left"},[t._v("￥"),s("strong",{staticClass:"f20"},[t._v(t._s(i.price/100))])]),s("el-button",{staticClass:"pull-right",attrs:{type:"primary",size:"mini"},on:{click:function(s){return t.add(i,1)}}},[t._v("加入礼品包")])],1),t._v(" "),s("div",{staticClass:"mar5 over shopDes"},[s("span",{staticClass:"pull-left"},[t._v("重量："+t._s(i.weight/1e3)+"kg")]),t._v(" "),s("span",{staticClass:"pull-right"},[t._v("库存："+t._s(i.amount))])])])}),1)],1),t._v(" "),s("div",{staticClass:"pageDiv"},[s("el-pagination",{attrs:{background:"","current-page":t.page,"page-sizes":[16,32,64,96],"page-size":t.size,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)]),t._v(" "),s("div",{staticClass:"fffbg pull-right",staticStyle:{width:"330px"}},[s("table",{staticClass:"gwc",attrs:{width:"100%"}},[t._m(1),t._v(" "),t._l(t.shopcar,function(i,c){return s("tr",[s("td",[s("img",{staticStyle:{width:"40px",height:"40px"},attrs:{src:i.images.split(",")[0]}})]),t._v(" "),s("td",[t._v("￥"+t._s(i.price/100))]),t._v(" "),s("td",[t._v(t._s(i.weight/1e3)+"kg")]),t._v(" "),s("td",[t._v(t._s(i.num)+"\n                ")]),t._v(" "),s("td",[s("div",[t._v("￥"+t._s(i.total))]),t._v(" "),s("i",{staticClass:"el-icon-delete deleteBt",on:{click:function(i){return t.del(c)}}})])])})],2),t._v(" "),s("div",{staticClass:"pad"},[t.shopcar.length>0?s("div",{staticClass:"over"},[s("span",{staticClass:"pull-left"},[t._v("商品总额：")]),t._v(" "),s("strong",{staticClass:"pull-right red "},[t._v("￥"+t._s(t.productPrize))])]):t._e(),t._v(" "),t.shopcar.length>0?s("div",{staticClass:"over"},[s("span",{staticClass:"pull-left"},[t._v("运费( "+t._s(t.zhongliang)+"kg)：")]),t._v(" "),s("strong",{staticClass:"pull-right red"},[t._v("￥"+t._s(t.yunfei))])]):t._e(),t._v(" "),t.shopcar.length>0?s("div",{staticClass:"over"},[s("span",{staticClass:"pull-left"},[t._v("总计： ")]),t._v(" "),s("strong",{staticClass:"pull-right red"},[t._v("￥"+t._s(t.totalPrize))])]):t._e(),t._v(" "),s("el-button",{staticClass:"mar",staticStyle:{width:"100%"},attrs:{disabled:0==t.shopcar.length,type:"primary"},on:{click:t.send}},[t._v("立即采购")])],1)])]),t._v(" "),s("foot"),t._v(" "),s("el-dialog",{attrs:{visible:t.detailDiv,width:"900px",center:""},on:{"update:visible":function(i){t.detailDiv=i}}},[s("div",{staticStyle:{height:"600px",overflow:"auto"}},[s("div",{staticClass:"over"},[s("div",{staticClass:"bigImg"},[s("img",{attrs:{src:t.imgUrl}})]),t._v(" "),s("ul",{staticClass:"smallImg"},t._l(t.smallList,function(i){return s("li",{on:{mouseover:function(s){return t.getBigImg(i)}}},[s("img",{attrs:{src:i}})])}),0),t._v(" "),s("div",{staticClass:"detailRight"},[s("div",{staticClass:"detailTitle"},[t._v(t._s(t.main.name))]),t._v(" "),s("div",[s("span",{staticClass:"red"},[t._v("￥"),s("strong",{staticClass:"jg"},[t._v(t._s(t.main.price/100))])]),t._v("\n                      淘宝价:"),s("span",{staticClass:"scj"},[t._v(t._s(t.main.oldPrice/100))])]),t._v(" "),s("div",{staticClass:"mar"},[t._v("重量:"+t._s(t.main.weight/1e3)+"kg/件")]),t._v(" "),s("div",{staticClass:"mar"},[s("el-input-number",{attrs:{min:1,max:t.main.amount},model:{value:t.buynum,callback:function(i){t.buynum=i},expression:"buynum"}}),t._v("\n                        库存："+t._s(t.main.amount)+"\n                  ")],1),t._v(" "),s("el-button",{staticClass:"mar",staticStyle:{width:"180px"},attrs:{type:"primary"},on:{click:function(i){t.add(t.main,t.buynum),t.detailDiv=!1}}},[t._v("加入礼品包")])],1)]),t._v(" "),s("div",{staticClass:"mar mainH"},[s("div",{staticClass:"mainHICO"}),s("span",{staticClass:"pull-left"},[t._v("产品介绍")])]),t._v(" "),s("div",{staticClass:"mar"},[s("div",{domProps:{innerHTML:t._s(t.main.detail)}})])])])],1)},staticRenderFns:[function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"mainH"},[i("div",{staticClass:"mainHICO"}),i("span",{staticClass:"pull-left"},[this._v("礼品商城")])])},function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("tr",[s("th",[t._v("产品")]),t._v(" "),s("th",[t._v("单价")]),t._v(" "),s("th",[t._v("重量")]),t._v(" "),s("th",[t._v("数量")]),t._v(" "),s("th",[t._v("总价")])])}]};var h=s("VU/8")(l,n,!1,function(t){s("YpcG")},"data-v-5cbff9a2",null);i.default=h.exports}});
//# sourceMappingURL=13.8d0388c2243da7d7bc56.js.map