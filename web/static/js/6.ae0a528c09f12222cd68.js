webpackJsonp([6],{"5zde":function(t,i,s){s("zQR9"),s("qyJz"),t.exports=s("FeBl").Array.from},Bb8x:function(t,i){},Gu7T:function(t,i,s){"use strict";i.__esModule=!0;var e,a=s("c/Tr"),r=(e=a)&&e.__esModule?e:{default:e};i.default=function(t){if(Array.isArray(t)){for(var i=0,s=Array(t.length);i<t.length;i++)s[i]=t[i];return s}return(0,r.default)(t)}},"c/Tr":function(t,i,s){t.exports={default:s("5zde"),__esModule:!0}},fBQ2:function(t,i,s){"use strict";var e=s("evD5"),a=s("X8DO");t.exports=function(t,i,s){i in t?e.f(t,i,a(0,s)):t[i]=s}},lrDH:function(t,i){},pt6B:function(t,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=s("mvHQ"),a=s.n(e),r=s("Gu7T"),n=s.n(r),o=s("rQpX"),c=s("Qc6y"),l=s("RxMd"),h={components:{foot:o.default,topMember:l.default,top:c.default},data:function(){return{list:[],checkList:[],page:1,size:16,sort:"id",direction:"asc",priceDir:"asc",weightDir:"asc",saleCountDir:"asc",type:"",detailDiv:!1,main:{},buynum:1,imgUrl:"",smallList:[],Hovcolor:"#c0c4cc",Hovcolor2:"#c0c4cc",Hovcolor3:"#c0c4cc",Hovcolor4:"#c0c4cc",Hovcolor5:"#c0c4cc",Hovcolor6:"#c0c4cc",shopcar:[],total:0,productPrize:"",zhongliang:"",yunfei:"",totalPrize:"",current:0,seen:!1,priceForm:JSON.parse(sessionStorage.getItem("priceForm"))}},mounted:function(){this.$route.query.id&&(this.checkList=[].concat(n()(this.$route.query.id))),this.getList()},methods:{enter:function(t){this.seen=!0,this.current=t},leave:function(){this.seen=!1,this.current=null},send:function(){sessionStorage.setItem("shopcar",a()(this.shopcar)),this.$router.push({path:"/buy",query:{buy:"0",productPrize:this.productPrize,zhongliang:this.zhongliang,yunfei:this.yunfei,totalPrize:this.totalPrize}})},typeChange:function(){this.getList()},typeChangeClear:function(){this.checkList=[],this.getList()},getList:function(){var t=this;t.list=[],this.axios.get("/giftmall/goods?state=0&page="+(t.page-1)+"&size="+t.size+"&sort="+t.sort+"&direction="+t.direction+"&type="+t.checkList.join(),{headers:{"Content-Type":"application/x-www-form-urlencoded",domain:this.url,Authorization:sessionStorage.getItem("token")}}).then(function(i){if(200==i.data.code){t.list=i.data.data.list,t.total=i.data.data.totalCount;for(var s=0;s<t.list.length;s++)null==t.list[s].images&&(t.list[s].images="../../static/nopic.jpg")}})},paixu:function(t){this.sort=t,"id"===t?this.direction="asc":"price"===t?("asc"===this.priceDir?this.priceDir="desc":this.priceDir="asc",this.direction=this.priceDir):"weight"===t?("asc"===this.weightDir?this.weightDir="desc":this.weightDir="asc",this.direction=this.weightDir):("asc"===this.saleCountDir?this.saleCountDir="desc":this.saleCountDir="asc",this.direction=this.saleCountDir),this.getList()},detail:function(t){this.detailDiv=!0,this.buynum=1;var i=this;this.axios.get("/giftmall/goods/"+t,{headers:{"Content-Type":"application/x-www-form-urlencoded",domain:this.url,Authorization:sessionStorage.getItem("token")}}).then(function(t){200==t.data.code&&(i.main=t.data.data,t.data.data.images?(i.smallList=t.data.data.images.split(","),i.imgUrl=i.smallList[0]):(i.smallList=["../../static/nopic.jpg"],i.imgUrl="../../static/nopic.jpg"))})},add:function(t,i){if(this.shopcar.find(function(i){return i.id==t.id}))for(var s=0;s<this.shopcar.length;s++)t.id==this.shopcar[s].id&&(this.$set(this.shopcar[s],"num",Number(i)+Number(this.shopcar[s].num)),this.$set(this.shopcar[s],"total",parseFloat(100*t.price).toFixed(2)*this.shopcar[s].num/1e4));else this.$set(t,"num",i),this.$set(t,"total",parseFloat(100*t.price).toFixed(2)*t.num/1e4),this.shopcar.push(t);this.changePrize()},del:function(t){this.shopcar.splice(t,1),this.changePrize()},changePrize:function(){this.zhongliang=(parseFloat(this.shopcar.reduce(function(t,i){return i.weight*i.num+t},0))/1e3).toFixed(2),this.productPrize=this.shopcar.reduce(function(t,i){return i.total+t},0).toFixed(2),this.zhongliang<=.5?this.yunfei=(this.priceForm.nearPrice1/100).toFixed(2):this.zhongliang>.5&&this.zhongliang<=1?this.yunfei=(this.priceForm.nearPrice2/100).toFixed(2):this.zhongliang>1&&(this.yunfei=(Math.ceil(this.zhongliang-1)*this.priceForm.nearPrice3/100+this.priceForm.nearPrice2/100).toFixed(2)),this.totalPrize=(parseFloat(this.productPrize)+parseFloat(this.yunfei)).toFixed(2)},changeNum:function(t,i){for(var s=0;s<this.shopcar.length;s++)t==this.shopcar[s].id&&(this.$set(this.shopcar[s],"total",parseFloat(100*this.shopcar[s].price).toFixed(2)*i/1e4),this.changePrize())},getBigImg:function(t){this.imgUrl=t},handleSizeChange:function(t){console.log("每页 "+t+" 条"),this.size=t,this.getList()},handleCurrentChange:function(t){console.log("当前页: "+t),this.page=t,this.getList()}}},u={render:function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticStyle:{background:"white"}},[s("top"),t._v(" "),s("div",{staticClass:"box mar over"},[s("div",{staticClass:"fffbg pull-left"},[t._m(0),t._v(" "),s("div",{staticClass:"filterBoxWrap"},[s("div",{staticClass:"filterRow"},[s("strong",[t._v("分 类 筛 选：")]),t._v(" "),s("ul",{staticClass:"listUI"},[s("li",{staticStyle:{display:"flex"}},[s("el-checkbox-group",{attrs:{size:"mini"},on:{change:t.typeChange},model:{value:t.checkList,callback:function(i){t.checkList=i},expression:"checkList"}},[s("el-checkbox",{attrs:{label:"1"}},[t._v("一毛专区")]),t._v(" "),s("el-checkbox",{attrs:{label:"2"}},[t._v("新品专区")]),t._v(" "),s("el-checkbox",{attrs:{label:"3"}},[t._v("配重专区")]),t._v(" "),s("el-checkbox",{attrs:{label:"4"}},[t._v("高端精品")]),t._v(" "),s("el-checkbox",{attrs:{label:"5"}},[t._v("畅销专区")]),t._v(" "),s("el-checkbox",{attrs:{label:"6"}},[t._v("厨卫用品")]),t._v(" "),s("el-checkbox",{attrs:{label:"7"}},[t._v("办公用具")]),t._v(" "),s("el-checkbox",{attrs:{label:"8"}},[t._v("家居日常")])],1),t._v(" "),s("b",{staticClass:"clearAll",on:{click:t.typeChangeClear}},[t._v("清空")])],1)])]),t._v(" "),s("div",{staticClass:"line"}),t._v(" "),s("div",{staticClass:"filterRow"},[s("strong",[t._v("排 　 　 序：")]),t._v(" "),s("ul",{staticClass:"listUI"},[s("li",{staticStyle:{display:"flex"}},[s("div",{staticClass:"sort_root",class:{select:"id"===t.sort},staticStyle:{"margin-left":"0"},on:{click:function(i){return t.paixu("id")}}},[s("span",[t._v("综合排序")])]),t._v(" "),s("div",{staticClass:"sort_root",class:{select:"price"===t.sort},on:{click:function(i){return t.paixu("price")}}},[s("span",{directives:[{name:"show",rawName:"v-show",value:"asc"===t.priceDir,expression:"priceDir === 'asc'"}]},[t._v("价格从高到低")]),t._v(" "),s("i",{directives:[{name:"show",rawName:"v-show",value:"asc"===t.priceDir,expression:"priceDir === 'asc'"}],staticClass:"el-icon-arrow-down"}),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:"asc"!==t.priceDir,expression:"priceDir !== 'asc'"}]},[t._v("价格从低到高")]),t._v(" "),s("i",{directives:[{name:"show",rawName:"v-show",value:"asc"!==t.priceDir,expression:"priceDir !== 'asc'"}],staticClass:"el-icon-arrow-up"})]),t._v(" "),s("div",{staticClass:"sort_root",class:{select:"weight"===t.sort},on:{click:function(i){return t.paixu("weight")}}},[s("span",{directives:[{name:"show",rawName:"v-show",value:"asc"===t.weightDir,expression:"weightDir === 'asc'"}]},[t._v("重量从高到低")]),t._v(" "),s("i",{directives:[{name:"show",rawName:"v-show",value:"asc"===t.weightDir,expression:"weightDir === 'asc'"}],staticClass:"el-icon-arrow-down"}),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:"asc"!==t.weightDir,expression:"weightDir !== 'asc'"}]},[t._v("重量从低到高")]),t._v(" "),s("i",{directives:[{name:"show",rawName:"v-show",value:"asc"!==t.weightDir,expression:"weightDir !== 'asc'"}],staticClass:"el-icon-arrow-up"})]),t._v(" "),s("div",{staticClass:"sort_root",class:{select:"saleCount"===t.sort},on:{click:function(i){return t.paixu("saleCount")}}},[s("span",{directives:[{name:"show",rawName:"v-show",value:"asc"===t.saleCountDir,expression:"saleCountDir === 'asc'"}]},[t._v("销量从高到低")]),t._v(" "),s("i",{directives:[{name:"show",rawName:"v-show",value:"asc"===t.saleCountDir,expression:"saleCountDir === 'asc'"}],staticClass:"el-icon-arrow-down"}),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:"asc"!==t.saleCountDir,expression:"saleCountDir !== 'asc'"}]},[t._v("销量从低到高")]),t._v(" "),s("i",{directives:[{name:"show",rawName:"v-show",value:"asc"!==t.saleCountDir,expression:"saleCountDir !== 'asc'"}],staticClass:"el-icon-arrow-up"})]),t._v(" "),s("b",{staticClass:"clearAll",on:{click:function(i){return t.paixu("id")}}},[t._v("清空")])])])])]),t._v(" "),s("div",[s("div",{staticClass:"indexlist",staticStyle:{"margin-left":"-1%"}},t._l(t.list,function(i,e){return s("li",{key:e,staticStyle:{width:"19%"}},[s("div",{staticClass:"img_root",on:{mouseenter:function(i){return t.enter(e)},mouseleave:function(i){return t.leave()}}},[s("img",{attrs:{src:i.images.split(",")[0]}}),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.seen&&t.current===e,expression:"seen&&current === index"}],staticClass:"layer"},[s("span",{staticClass:"layer_tip",on:{click:function(i){return t.$router.push({path:"/buy"})}}},[t._v("立即采购")])])]),t._v(" "),s("div",{staticClass:"mar5 over"},[s("span",{staticClass:"red pull-left"},[t._v("￥"),s("strong",{staticStyle:{"font-size":"28px"}},[t._v(t._s(i.price/100))])]),t._v(" "),s("span",{staticClass:"pull-right weight_bg"},[t._v("重量："+t._s(i.weight/1e3)+"kg/件")])]),t._v(" "),s("div",{staticClass:"shoptitle"},[t._v(t._s(i.name))]),t._v(" "),s("div",{staticClass:"line"}),t._v(" "),s("div",{staticClass:"mar5 over shopDes"},[s("span",{staticClass:"pull-left"},[t._v("库存："),s("span",{staticStyle:{color:"#9C0321"}},[t._v(t._s(i.amount)+" 件")])])])])}),0)]),t._v(" "),s("div",{staticClass:"pageDiv"},[s("el-pagination",{attrs:{background:"","current-page":t.page,"page-sizes":[16,32,64,96],"page-size":t.size,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])]),t._v(" "),s("foot"),t._v(" "),s("el-dialog",{attrs:{visible:t.detailDiv,width:"900px",center:""},on:{"update:visible":function(i){t.detailDiv=i}}},[s("div",{staticStyle:{height:"600px",overflow:"auto"}},[s("div",{staticClass:"over"},[s("div",{staticClass:"bigImg"},[s("img",{attrs:{src:t.imgUrl}})]),t._v(" "),s("ul",{staticClass:"smallImg"},t._l(t.smallList,function(i){return s("li",{on:{mouseover:function(s){return t.getBigImg(i)}}},[s("img",{attrs:{src:i}})])}),0),t._v(" "),s("div",{staticClass:"detailRight"},[s("div",{staticClass:"detailTitle"},[t._v(t._s(t.main.name))]),t._v(" "),s("div",[s("span",{staticClass:"red"},[t._v("￥"),s("strong",{staticClass:"jg"},[t._v(t._s(t.main.price/100))])]),t._v("\n                      淘宝价:"),s("span",{staticClass:"scj"},[t._v(t._s(t.main.oldPrice/100))])]),t._v(" "),s("div",{staticClass:"mar"},[t._v("重量:"+t._s(t.main.weight/1e3)+"kg/件")]),t._v(" "),s("div",{staticClass:"mar"},[s("el-input-number",{attrs:{min:1,max:t.main.amount},model:{value:t.buynum,callback:function(i){t.buynum=i},expression:"buynum"}}),t._v("\n                        库存："+t._s(t.main.amount)+"\n                  ")],1),t._v(" "),s("el-button",{staticClass:"mar",staticStyle:{width:"180px"},attrs:{type:"primary"},on:{click:function(i){t.add(t.main,t.buynum),t.detailDiv=!1}}},[t._v("加入礼品包")])],1)]),t._v(" "),s("div",{staticClass:"mar mainH"},[s("div",{staticClass:"mainHICO"}),s("span",{staticClass:"pull-left"},[t._v("产品介绍")])]),t._v(" "),s("div",{staticClass:"mar"},[s("div",{domProps:{innerHTML:t._s(t.main.detail)}})])])])],1)},staticRenderFns:[function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"main_shop_title"},[i("span",{staticClass:"shop_title"},[this._v("所有礼品")])])}]};var v=s("VU/8")(h,u,!1,function(t){s("lrDH"),s("Bb8x")},"data-v-5c4a256a",null);i.default=v.exports},qyJz:function(t,i,s){"use strict";var e=s("+ZMJ"),a=s("kM2E"),r=s("sB3e"),n=s("msXi"),o=s("Mhyx"),c=s("QRG4"),l=s("fBQ2"),h=s("3fs2");a(a.S+a.F*!s("dY0y")(function(t){Array.from(t)}),"Array",{from:function(t){var i,s,a,u,v=r(t),d="function"==typeof this?this:Array,p=arguments.length,g=p>1?arguments[1]:void 0,m=void 0!==g,_=0,f=h(v);if(m&&(g=e(g,p>2?arguments[2]:void 0,2)),void 0==f||d==Array&&o(f))for(s=new d(i=c(v.length));i>_;_++)l(s,_,m?g(v[_],_):v[_]);else for(u=f.call(v),s=new d;!(a=u.next()).done;_++)l(s,_,m?n(u,g,[a.value,_],!0):a.value);return s.length=_,s}})}});
//# sourceMappingURL=6.ae0a528c09f12222cd68.js.map